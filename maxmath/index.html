<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Max vs Oscar - F1 2025 Championship Battle</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            padding: 20px;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        h1 {
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.8em;
            background: linear-gradient(45deg, #E30118, #FF8700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .subtitle {
            text-align: center;
            color: #aaa;
            margin-bottom: 20px;
            font-size: 1.2em;
        }
        .update-banner {
            background: linear-gradient(45deg, #00ff00, #00cc00);
            color: #000;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0, 255, 0, 0.3);
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: rgba(255, 255, 255, 0.08);
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            transition: transform 0.3s;
            border-top: 4px solid;
        }
        .stat-card:hover {
            transform: translateY(-5px);
        }
        .stat-card.max {
            border-top-color: #E30118;
        }
        .stat-card.oscar {
            border-top-color: #FF8700;
        }
        .stat-card.gap {
            border-top-color: #00ff00;
        }
        .stat-header {
            font-size: 1em;
            color: #aaa;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .stat-value {
            font-size: 3em;
            font-weight: bold;
            color: #fff;
            margin-bottom: 8px;
        }
        .stat-label {
            font-size: 0.9em;
            color: #999;
        }
        .chart-wrapper {
            position: relative;
            height: 700px;
            margin-bottom: 30px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
        }
        .legend-custom {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
            margin-top: 30px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            transition: all 0.3s;
            cursor: pointer;
        }
        .legend-item:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        .legend-color {
            width: 35px;
            height: 4px;
            margin-right: 12px;
            border-radius: 2px;
        }
        .legend-text {
            font-size: 0.95em;
            font-weight: 500;
        }
        .info-box {
            background: rgba(227, 1, 24, 0.1);
            border-left: 5px solid #E30118;
            padding: 20px;
            margin-top: 25px;
            border-radius: 8px;
        }
        .info-box h3 {
            margin-bottom: 15px;
            color: #FF8700;
            font-size: 1.3em;
        }
        .info-box ul {
            list-style: none;
            padding-left: 0;
        }
        .info-box li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 1.05em;
        }
        .info-box li:last-child {
            border-bottom: none;
        }
        .sprint-indicator {
            color: #FDD900;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèÅ F1 2025 Championship Battle</h1>
        <p class="subtitle">Max Verstappen vs Oscar Piastri - Point Difference Analysis</p>
        
        <div class="update-banner">
            ‚úÖ AUSTIN RESULTS: Max wins Sprint (Oscar DNF) + Max wins Race (Oscar P5) ‚Üí Gap reduced from 63 to 40 points!
        </div>

        <div class="stats-grid">
            <div class="stat-card max">
                <div class="stat-header">Max Verstappen</div>
                <div class="stat-value">296</div>
                <div class="stat-label">Sprint: P1 (8pts) | Race: P1 (25pts)</div>
            </div>
            <div class="stat-card gap">
                <div class="stat-header">Current Gap</div>
                <div class="stat-value">40</div>
                <div class="stat-label">Oscar still leads | Down from 63</div>
            </div>
            <div class="stat-card oscar">
                <div class="stat-header">Oscar Piastri</div>
                <div class="stat-value">336</div>
                <div class="stat-label">Sprint: DNF (0pts) | Race: P5 (10pts)</div>
            </div>
        </div>
        
        <div class="chart-wrapper">
            <canvas id="championshipChart"></canvas>
        </div>

        <div class="legend-custom">
            <div class="legend-item">
                <div class="legend-color" style="background: #fff; height: 4px;"></div>
                <div class="legend-text">‚ö™ Historical Data (Actual)</div>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #00ff00;"></div>
                <div class="legend-text">üü¢ Current Trend (13.5 pts/race)</div>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #00d4ff;"></div>
                <div class="legend-text">üîµ Optimistic (16 pts/race)</div>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #ffaa00;"></div>
                <div class="legend-text">üü† Conservative (10 pts/race)</div>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #ff00ff;"></div>
                <div class="legend-text">üü£ Best Case (Max dominance)</div>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #ff4444;"></div>
                <div class="legend-text">üî¥ Mixed Realistic</div>
            </div>
        </div>

        <div class="info-box">
            <h3>üìä Championship Mathematics - Updated After Austin</h3>
            <ul>
                <li><strong>Starting Gap (Singapore):</strong> 63 points</li>
                <li><strong>Austin Sprint:</strong> Max P1 (8pts), Oscar DNF (0pts) ‚Üí Max gains +8 ‚Üí Gap: 55 points</li>
                <li><strong>Austin GP:</strong> Max P1 (25pts), Oscar P5 (10pts) ‚Üí Max gains +15 ‚Üí Gap: 40 points</li>
                <li><strong>Total Gained at Austin:</strong> 23 points in one weekend!</li>
                <li><strong>Current Championship Gap:</strong> 40 points (Oscar leads)</li>
                <li><strong>Remaining Points Available:</strong> 141 total (125 from 5 GPs + 16 from 2 Sprints)</li>
                <li><strong>Sprint Races Remaining:</strong> <span class="sprint-indicator">‚òÖ Brazil (Nov 7-9), Qatar (Nov 28-30)</span></li>
                <li><strong>Regular GPs Remaining:</strong> Mexico, Brazil, Las Vegas, Qatar, Abu Dhabi</li>
                <li><strong>Max's Recent Average:</strong> 13.5 points gained per race/sprint event</li>
                <li><strong>Races Needed:</strong> ~3 more races at current pace to take the lead!</li>
            </ul>
        </div>
    </div>

    <script>
        const races = [
            'Zandvoort', 'Monza', 'Baku', 'Singapore',
            'Austin Sprint', 'Austin GP', 'Mexico', 
            'Brazil Sprint', 'Brazil GP', 'Las Vegas',
            'Qatar Sprint', 'Qatar GP', 'Abu Dhabi'
        ];

        // ACCURATE Historical Data
        // Singapore: 63 pts gap
        // Austin Sprint: Max P1 (8), Oscar DNF (0) ‚Üí gap reduced by 8 ‚Üí 55
        // Austin GP: Max P1 (25), Oscar P5 (10) ‚Üí gap reduced by 15 ‚Üí 40
        const historical = [104, 94, 69, 63, 55, 40];
        
        // Calculate predictions starting from 40
        // Recent gains: Monza to Baku (25), Baku to Singapore (6), Austin Sprint (8), Austin GP (15)
        // Last 4 events average: (25 + 6 + 8 + 15) / 4 = 13.5 pts/event
        
        // SCENARIO 1: Current Trend (13.5 pts/race, 3 pts/sprint)
        const currentTrend = [
            40,      // Starting point
            37,      // Mexico GP: -3
            27,      // Brazil Sprint: -10
            25,      // Brazil GP: -2
            15,      // Las Vegas: -10
            12,      // Qatar Sprint: -3
            2,       // Qatar GP: -10
            -8       // Abu Dhabi: -10
        ];
        
        // SCENARIO 2: Optimistic (16 pts/race, 4 pts/sprint)
        const optimistic = [
            40,      // Starting
            24,      // Mexico: -16
            20,      // Brazil Sprint: -4
            4,       // Brazil GP: -16
            -12,     // Las Vegas: -16
            -16,     // Qatar Sprint: -4
            -32,     // Qatar GP: -16
            -48      // Abu Dhabi: -16
        ];
        
        // SCENARIO 3: Conservative (10 pts/race, 2 pts/sprint)
        const conservative = [
            40,      // Starting
            30,      // Mexico: -10
            28,      // Brazil Sprint: -2
            18,      // Brazil GP: -10
            8,       // Las Vegas: -10
            6,       // Qatar Sprint: -2
            -4,      // Qatar GP: -10
            -14      // Abu Dhabi: -10
        ];
        
        // SCENARIO 4: Best Case (Max wins all, Oscar P3-P5)
        const bestCase = [
            40,      // Starting
            20,      // Mexico: Max P1 (25), Oscar P4 (12) = -13, actual -20 for dominance
            17,      // Brazil Sprint: Max P1 (8), Oscar P4 (5) = -3
            -3,      // Brazil GP: Max P1 (25), Oscar P5 (10) = -15, use -20
            -23,     // Las Vegas: -20
            -26,     // Qatar Sprint: -3
            -46,     // Qatar GP: -20
            -66      // Abu Dhabi: -20
        ];
        
        // SCENARIO 5: Mixed Realistic (varying results)
        const mixedRealistic = [
            40,      // Starting
            33,      // Mexico: Max P2, Oscar P1 = -7
            31,      // Brazil Sprint: -2
            16,      // Brazil GP: Max P1, Oscar P3 = -15
            6,       // Las Vegas: -10
            4,       // Qatar Sprint: -2
            -4,      // Qatar GP: -8
            2        // Abu Dhabi: Oscar P1, Max P2 = +6
        ];

        const ctx = document.getElementById('championshipChart').getContext('2d');
        
        const chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: races,
                datasets: [
                    {
                        label: 'Historical (Actual)',
                        data: [104, 94, 69, 63, 55, 40, null, null, null, null, null, null, null],
                        borderColor: '#ffffff',
                        backgroundColor: 'rgba(255, 255, 255, 0.1)',
                        borderWidth: 5,
                        pointRadius: 8,
                        pointHoverRadius: 10,
                        pointBackgroundColor: '#ffffff',
                        pointBorderColor: '#E30118',
                        pointBorderWidth: 3,
                        tension: 0.3,
                        fill: false
                    },
                    {
                        label: 'Current Trend (13.5 pts/race avg)',
                        data: [null, null, null, null, null, ...currentTrend],
                        borderColor: '#00ff00',
                        backgroundColor: 'rgba(0, 255, 0, 0.08)',
                        borderWidth: 4,
                        pointRadius: 6,
                        pointHoverRadius: 8,
                        pointStyle: 'circle',
                        tension: 0.3,
                        borderDash: [8, 4],
                        fill: true
                    },
                    {
                        label: 'Optimistic (16 pts/race)',
                        data: [null, null, null, null, null, ...optimistic],
                        borderColor: '#00d4ff',
                        backgroundColor: 'rgba(0, 212, 255, 0.05)',
                        borderWidth: 3,
                        pointRadius: 5,
                        pointHoverRadius: 7,
                        pointStyle: 'triangle',
                        tension: 0.3,
                        borderDash: [12, 6]
                    },
                    {
                        label: 'Conservative (10 pts/race)',
                        data: [null, null, null, null, null, ...conservative],
                        borderColor: '#ffaa00',
                        backgroundColor: 'rgba(255, 170, 0, 0.05)',
                        borderWidth: 3,
                        pointRadius: 5,
                        pointHoverRadius: 7,
                        pointStyle: 'rect',
                        tension: 0.3,
                        borderDash: [4, 4]
                    },
                    {
                        label: 'Best Case (Max Dominance)',
                        data: [null, null, null, null, null, ...bestCase],
                        borderColor: '#ff00ff',
                        backgroundColor: 'rgba(255, 0, 255, 0.05)',
                        borderWidth: 3,
                        pointRadius: 5,
                        pointHoverRadius: 7,
                        pointStyle: 'rectRot',
                        tension: 0.3,
                        borderDash: [16, 8]
                    },
                    {
                        label: 'Mixed Realistic',
                        data: [null, null, null, null, null, ...mixedRealistic],
                        borderColor: '#ff4444',
                        backgroundColor: 'rgba(255, 68, 68, 0.05)',
                        borderWidth: 3,
                        pointRadius: 5,
                        pointHoverRadius: 7,
                        pointStyle: 'crossRot',
                        tension: 0.3,
                        borderDash: [10, 5]
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'Oscar\'s Point Lead Over Max | Negative Values = Max Leading',
                        color: '#fff',
                        font: {
                            size: 18,
                            weight: 'bold'
                        },
                        padding: 25
                    },
                    legend: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.9)',
                        titleColor: '#FF8700',
                        bodyColor: '#fff',
                        borderColor: '#E30118',
                        borderWidth: 3,
                        padding: 16,
                        displayColors: true,
                        titleFont: {
                            size: 14,
                            weight: 'bold'
                        },
                        bodyFont: {
                            size: 13
                        },
                        callbacks: {
                            title: function(context) {
                                const label = context[0].label;
                                const isSprint = label.includes('Sprint');
                                return (isSprint ? '‚òÖ ' : 'üèÅ ') + label;
                            },
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed.y !== null) {
                                    const gap = Math.abs(context.parsed.y);
                                    if (context.parsed.y === 0) {
                                        label += 'üèÜ CHAMPIONSHIP TIED!';
                                    } else {
                                        const leader = context.parsed.y > 0 ? 'Oscar' : 'Max';
                                        label += `${leader} leads by ${gap} points`;
                                    }
                                }
                                return label;
                            },
                            afterLabel: function(context) {
                                const idx = context.dataIndex;
                                // Show actual results for completed races
                                if (idx === 4) return ['Max: P1 (8 pts)', 'Oscar: DNF (0 pts)', 'Max gained: +8 pts'];
                                if (idx === 5) return ['Max: P1 (25 pts)', 'Oscar: P5 (10 pts)', 'Max gained: +15 pts'];
                                return null;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.15)',
                            drawTicks: true
                        },
                        ticks: {
                            color: '#fff',
                            font: {
                                size: 12,
                                weight: '500'
                            },
                            maxRotation: 45,
                            minRotation: 45,
                            callback: function(value, index) {
                                const label = this.getLabelForValue(value);
                                const isSprint = label.includes('Sprint');
                                const isAustin = label.includes('Austin');
                                let prefix = '';
                                if (isAustin) prefix = '‚úÖ ';
                                if (isSprint) prefix += '‚òÖ ';
                                return prefix + label;
                            }
                        },
                        border: {
                            color: 'rgba(255, 255, 255, 0.4)',
                            width: 2
                        }
                    },
                    y: {
                        grid: {
                            color: function(context) {
                                if (context.tick.value === 0) {
                                    return 'rgba(0, 0, 0, 0.9)';
                                }
                                return 'rgba(255, 255, 255, 0.12)';
                            },
                            lineWidth: function(context) {
                                if (context.tick.value === 0) {
                                    return 4;
                                }
                                return 1;
                            }
                        },
                        ticks: {
                            color: '#fff',
                            font: {
                                size: 13,
                                weight: '500'
                            },
                            callback: function(value) {
                                if (value === 0) return 'üèÜ‚ïê‚ïê‚ïê TIE ‚ïê‚ïê‚ïêüèÜ';
                                return value > 0 ? `‚Üë Oscar +${value}` : `‚Üì Max +${Math.abs(value)}`;
                            },
                            stepSize: 10
                        },
                        border: {
                            color: 'rgba(255, 255, 255, 0.4)',
                            width: 2,
                            dash: [6, 6]
                        },
                        title: {
                            display: true,
                            text: 'Championship Points Gap (Positive = Oscar Leading)',
                            color: '#FF8700',
                            font: {
                                size: 15,
                                weight: 'bold'
                            },
                            padding: 15
                        }
                    }
                }
            },
            plugins: [{
                afterDraw: function(chart) {
                    const ctx = chart.ctx;
                    const xAxis = chart.scales.x;
                    const yAxis = chart.scales.y;
                    
                    // Highlight sprint races with vertical bands
                    const sprintIndices = [4, 7, 10]; // Austin Sprint, Brazil Sprint, Qatar Sprint
                    
                    ctx.save();
                    sprintIndices.forEach(index => {
                        const x = xAxis.getPixelForValue(index);
                        const yTop = yAxis.top;
                        const yBottom = yAxis.bottom;
                        
                        // Highlight completed Austin sprint differently
                        const color = index === 4 ? 
                            'rgba(0, 255, 0, 0.15)' : 
                            'rgba(253, 217, 0, 0.1)';
                        
                        ctx.fillStyle = color;
                        ctx.fillRect(x - 18, yTop, 36, yBottom - yTop);
                        
                        const strokeColor = index === 4 ? 
                            'rgba(0, 255, 0, 0.5)' : 
                            'rgba(253, 217, 0, 0.4)';
                        
                        ctx.strokeStyle = strokeColor;
                        ctx.lineWidth = 2;
                        ctx.setLineDash([6, 6]);
                        ctx.beginPath();
                        ctx.moveTo(x, yTop);
                        ctx.lineTo(x, yBottom);
                        ctx.stroke();
                    });
                    ctx.restore();
                }
            }]
        });
    </script>
</body>
</html>
